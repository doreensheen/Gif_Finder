<!DOCtype>
<html lang="en-us">

    <head>
        <meta charset="utf=8">
        <title>Gif Finder</title>

        <!-- css reset -->
        <link rel="stylesheet" href="./assets/css/reset.css">
        <!-- bootstrap -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <!-- css styles -->
        <link rel="stylesheet" href="./assets/css/style.css">

        <!-- jQuery -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>

    <body>
        <div id="buttonHolder">Select an Emotion: </div>
        <div id="gifHolder">GIFS GALORE</div>

        <!-- JS Script -->
        <script>
            // add js code here
            emotionArray = ["Joy", "Trust", "Fear", "Surprise", "Sadness", "Disgust", "Anger", "Anticipation"]

            // create emotion buttons dynamically
            for (i=0; i<emotionArray.length; i++) {
                var gifButton = $("<button>");
                $("#buttonHolder").append(gifButton.text(emotionArray[i]));
                gifButton.attr("class", "gifButton")
                gifButton.attr("data-value", emotionArray[i]);
            };
            
            // on click event for emotion buttons
            $(".gifButton").on("click", function() {
                var emotion = $(this).attr("data-value");

                // call gifhy api
                var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
                emotion + "&api_key=dc6zaTOxFJmzC" + "&limit=10";
                
                // retreive data from api
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function(response) {
                    // return 10 items from data array
                    for (j=0; j<10; j++) {
                        var itemRating = response.data[j].rating;
                        var itemGif = $("<img>");
                        itemGif.attr("src", response.data[j].images.fixed_height.url);
                        
                        // display to html
                        var p = $("<p>");
                        $("#gifHolder").prepend(p.append(itemGif));
                        $("#gifHolder").prepend("Rating: " + itemRating);
                    };
                });
                
            });


        </script>
    </body>

</html>